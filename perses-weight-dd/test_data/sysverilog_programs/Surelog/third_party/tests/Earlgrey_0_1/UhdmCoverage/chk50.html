
<!DOCTYPE html>
<html>
<head>
<style>
body {

}
p {
font-size: 14px;
}</style>
<h3>hw/top_earlgrey/rtl/autogen/top_earlgrey.sv Cov: 100% </h3>
<pre style="margin:0; padding:0 ">   1: // Copyright lowRISC contributors.</pre>
<pre style="margin:0; padding:0 ">   2: // Licensed under the Apache License, Version 2.0, see LICENSE for details.</pre>
<pre style="margin:0; padding:0 ">   3: // SPDX-License-Identifier: Apache-2.0</pre>
<pre style="margin:0; padding:0 ">   4: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">   5: module top_earlgrey #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">   6:   parameter bit IbexPipeLine = 0</pre>
<pre style="margin:0; padding:0 ">   7: ) (</pre>
<pre style="margin:0; padding:0 ">   8:   // Clock and Reset</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">   9:   input               clk_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  10:   input               rst_ni,</pre>
<pre style="margin:0; padding:0 ">  11: </pre>
<pre style="margin:0; padding:0 ">  12:   // JTAG interface</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  13:   input               jtag_tck_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  14:   input               jtag_tms_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  15:   input               jtag_trst_ni,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  16:   input               jtag_td_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  17:   output              jtag_td_o,</pre>
<pre style="margin:0; padding:0 ">  18: </pre>
<pre style="margin:0; padding:0 ">  19:   // Multiplexed I/O</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  20:   input        [31:0] mio_in_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  21:   output logic [31:0] mio_out_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  22:   output logic [31:0] mio_oe_o,</pre>
<pre style="margin:0; padding:0 ">  23: </pre>
<pre style="margin:0; padding:0 ">  24:   // Dedicated I/O</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  25:   input               dio_spi_device_sck_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  26:   input               dio_spi_device_csb_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  27:   input               dio_spi_device_mosi_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  28:   output logic        dio_spi_device_miso_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  29:   output logic        dio_spi_device_miso_en_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  30:   input               dio_uart_rx_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  31:   output logic        dio_uart_tx_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  32:   output logic        dio_uart_tx_en_o,</pre>
<pre style="margin:0; padding:0 ">  33: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  34:   input               scanmode_i  // 1 for Scan</pre>
<pre style="margin:0; padding:0 ">  35: );</pre>
<pre style="margin:0; padding:0 ">  36: </pre>
<pre style="margin:0; padding:0 ">  37:   // JTAG IDCODE for development versions of this code.</pre>
<pre style="margin:0; padding:0 ">  38:   // Manufacturers of OpenTitan chips must replace this code with one of their</pre>
<pre style="margin:0; padding:0 ">  39:   // own IDs.</pre>
<pre style="margin:0; padding:0 ">  40:   // Field structure as defined in the IEEE 1149.1 (JTAG) specification,</pre>
<pre style="margin:0; padding:0 ">  41:   // section 12.1.1.</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  42:   localparam JTAG_IDCODE = {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  43:     4'h0,     // Version</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  44:     16'h4F54, // Part Number: "OT"</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  45:     11'h426,  // Manufacturer Identity: Google</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  46:     1'b1      // (fixed)</pre>
<pre style="margin:0; padding:0 ">  47:   };</pre>
<pre style="margin:0; padding:0 ">  48: </pre>
<pre style="margin:0; padding:0 ">  49:   import tlul_pkg::*;</pre>
<pre style="margin:0; padding:0 ">  50:   import top_pkg::*;</pre>
<pre style="margin:0; padding:0 ">  51:   import tl_main_pkg::*;</pre>
<pre style="margin:0; padding:0 ">  52:   import flash_ctrl_pkg::*;</pre>
<pre style="margin:0; padding:0 ">  53: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  54:   tl_h2d_t  tl_corei_h_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  55:   tl_d2h_t  tl_corei_h_d2h;</pre>
<pre style="margin:0; padding:0 ">  56: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  57:   tl_h2d_t  tl_cored_h_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  58:   tl_d2h_t  tl_cored_h_d2h;</pre>
<pre style="margin:0; padding:0 ">  59: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  60:   tl_h2d_t  tl_dm_sba_h_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  61:   tl_d2h_t  tl_dm_sba_h_d2h;</pre>
<pre style="margin:0; padding:0 ">  62: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  63:   tl_h2d_t  tl_debug_mem_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  64:   tl_d2h_t  tl_debug_mem_d_d2h;</pre>
<pre style="margin:0; padding:0 ">  65: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  66:   tl_h2d_t  tl_uart_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  67:   tl_d2h_t  tl_uart_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  68:   tl_h2d_t  tl_gpio_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  69:   tl_d2h_t  tl_gpio_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  70:   tl_h2d_t  tl_spi_device_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  71:   tl_d2h_t  tl_spi_device_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  72:   tl_h2d_t  tl_flash_ctrl_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  73:   tl_d2h_t  tl_flash_ctrl_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  74:   tl_h2d_t  tl_rv_timer_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  75:   tl_d2h_t  tl_rv_timer_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  76:   tl_h2d_t  tl_aes_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  77:   tl_d2h_t  tl_aes_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  78:   tl_h2d_t  tl_hmac_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  79:   tl_d2h_t  tl_hmac_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  80:   tl_h2d_t  tl_rv_plic_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  81:   tl_d2h_t  tl_rv_plic_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  82:   tl_h2d_t  tl_pinmux_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  83:   tl_d2h_t  tl_pinmux_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  84:   tl_h2d_t  tl_alert_handler_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  85:   tl_d2h_t  tl_alert_handler_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  86:   tl_h2d_t  tl_nmi_gen_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  87:   tl_d2h_t  tl_nmi_gen_d_d2h;</pre>
<pre style="margin:0; padding:0 ">  88: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  89:   tl_h2d_t tl_rom_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  90:   tl_d2h_t tl_rom_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  91:   tl_h2d_t tl_ram_main_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  92:   tl_d2h_t tl_ram_main_d_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  93:   tl_h2d_t tl_eflash_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  94:   tl_d2h_t tl_eflash_d_d2h;</pre>
<pre style="margin:0; padding:0 ">  95: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  96:   tl_h2d_t tl_main_h_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  97:   tl_d2h_t tl_main_h_d2h;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  98:   tl_h2d_t tl_peri_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  99:   tl_d2h_t tl_peri_d_d2h;</pre>
<pre style="margin:0; padding:0 "> 100: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 101:   assign tl_main_h_h2d = tl_peri_d_h2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 102:   assign tl_peri_d_d2h = tl_main_h_d2h;</pre>
<pre style="margin:0; padding:0 "> 103: </pre>
<pre style="margin:0; padding:0 "> 104:   //reset wires declaration</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 105:   logic lc_rst_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 106:   logic sys_rst_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 107:   logic sys_fixed_rst_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 108:   logic spi_device_rst_n;</pre>
<pre style="margin:0; padding:0 "> 109: </pre>
<pre style="margin:0; padding:0 "> 110:   //clock wires declaration</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 111:   logic main_clk;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 112:   logic fixed_clk;</pre>
<pre style="margin:0; padding:0 "> 113: </pre>
<pre style="margin:0; padding:0 "> 114:   // Signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 115:   logic [31:0] m2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 116:   logic [31:0] p2m;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 117:   logic [31:0] p2m_en;</pre>
<pre style="margin:0; padding:0 "> 118:   // uart</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 119:   logic        cio_uart_rx_p2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 120:   logic        cio_uart_tx_d2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 121:   logic        cio_uart_tx_en_d2p;</pre>
<pre style="margin:0; padding:0 "> 122:   // gpio</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 123:   logic [31:0] cio_gpio_gpio_p2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 124:   logic [31:0] cio_gpio_gpio_d2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 125:   logic [31:0] cio_gpio_gpio_en_d2p;</pre>
<pre style="margin:0; padding:0 "> 126:   // spi_device</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 127:   logic        cio_spi_device_sck_p2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 128:   logic        cio_spi_device_csb_p2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 129:   logic        cio_spi_device_mosi_p2d;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 130:   logic        cio_spi_device_miso_d2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 131:   logic        cio_spi_device_miso_en_d2p;</pre>
<pre style="margin:0; padding:0 "> 132:   // flash_ctrl</pre>
<pre style="margin:0; padding:0 "> 133:   // rv_timer</pre>
<pre style="margin:0; padding:0 "> 134:   // aes</pre>
<pre style="margin:0; padding:0 "> 135:   // hmac</pre>
<pre style="margin:0; padding:0 "> 136:   // rv_plic</pre>
<pre style="margin:0; padding:0 "> 137:   // pinmux</pre>
<pre style="margin:0; padding:0 "> 138:   // alert_handler</pre>
<pre style="margin:0; padding:0 "> 139:   // nmi_gen</pre>
<pre style="margin:0; padding:0 "> 140: </pre>
<pre style="margin:0; padding:0 "> 141: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 142:   logic [62:0]  intr_vector;</pre>
<pre style="margin:0; padding:0 "> 143:   // Interrupt source list</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 144:   logic intr_uart_tx_watermark;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 145:   logic intr_uart_rx_watermark;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 146:   logic intr_uart_tx_empty;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 147:   logic intr_uart_rx_overflow;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 148:   logic intr_uart_rx_frame_err;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 149:   logic intr_uart_rx_break_err;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 150:   logic intr_uart_rx_timeout;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 151:   logic intr_uart_rx_parity_err;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 152:   logic [31:0] intr_gpio_gpio;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 153:   logic intr_spi_device_rxf;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 154:   logic intr_spi_device_rxlvl;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 155:   logic intr_spi_device_txlvl;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 156:   logic intr_spi_device_rxerr;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 157:   logic intr_spi_device_rxoverflow;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 158:   logic intr_spi_device_txunderflow;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 159:   logic intr_flash_ctrl_prog_empty;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 160:   logic intr_flash_ctrl_prog_lvl;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 161:   logic intr_flash_ctrl_rd_full;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 162:   logic intr_flash_ctrl_rd_lvl;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 163:   logic intr_flash_ctrl_op_done;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 164:   logic intr_flash_ctrl_op_error;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 165:   logic intr_rv_timer_timer_expired_0_0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 166:   logic intr_hmac_hmac_done;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 167:   logic intr_hmac_fifo_full;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 168:   logic intr_hmac_hmac_err;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 169:   logic intr_alert_handler_classa;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 170:   logic intr_alert_handler_classb;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 171:   logic intr_alert_handler_classc;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 172:   logic intr_alert_handler_classd;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 173:   logic intr_nmi_gen_esc0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 174:   logic intr_nmi_gen_esc1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 175:   logic intr_nmi_gen_esc2;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 176:   logic intr_nmi_gen_esc3;</pre>
<pre style="margin:0; padding:0 "> 177: </pre>
<pre style="margin:0; padding:0 "> 178: </pre>
<pre style="margin:0; padding:0 "> 179:   </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 180:   logic [0:0] irq_plic;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 181:   logic [0:0] msip;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 182:   logic [5:0] irq_id[1];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 183:   logic [5:0] unused_irq_id[1];</pre>
<pre style="margin:0; padding:0 "> 184: </pre>
<pre style="margin:0; padding:0 "> 185:   // this avoids lint errors</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 186:   assign unused_irq_id = irq_id;</pre>
<pre style="margin:0; padding:0 "> 187: </pre>
<pre style="margin:0; padding:0 "> 188:   // Alert list</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 189:   prim_pkg::alert_tx_t [alert_pkg::NAlerts-1:0]  alert_tx;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 190:   prim_pkg::alert_rx_t [alert_pkg::NAlerts-1:0]  alert_rx;</pre>
<pre style="margin:0; padding:0 "> 191:   // Escalation outputs</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 192:   prim_pkg::esc_tx_t [alert_pkg::N_ESC_SEV-1:0]  esc_tx;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 193:   prim_pkg::esc_rx_t [alert_pkg::N_ESC_SEV-1:0]  esc_rx;</pre>
<pre style="margin:0; padding:0 "> 194: </pre>
<pre style="margin:0; padding:0 "> 195: </pre>
<pre style="margin:0; padding:0 "> 196:   // clock assignments</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 197:   assign main_clk = clk_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 198:   assign fixed_clk = clk_i;</pre>
<pre style="margin:0; padding:0 "> 199: </pre>
<pre style="margin:0; padding:0 "> 200:   // Non-debug module reset == reset for everything except for the debug module</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 201:   logic ndmreset_req;</pre>
<pre style="margin:0; padding:0 "> 202: </pre>
<pre style="margin:0; padding:0 "> 203:   // root resets</pre>
<pre style="margin:0; padding:0 "> 204:   // TODO: lc_rst_n is not the true root reset.  It will be differentiated once the</pre>
<pre style="margin:0; padding:0 "> 205:   //       the reset controller logic is present</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 206:   assign lc_rst_n = rst_ni;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 207:   assign sys_rst_n = (scanmode_i) ? lc_rst_n : ~ndmreset_req & lc_rst_n;</pre>
<pre style="margin:0; padding:0 "> 208: </pre>
<pre style="margin:0; padding:0 "> 209:   //non-root reset assignments</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 210:   assign sys_fixed_rst_n = sys_rst_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 211:   assign spi_device_rst_n = sys_rst_n;</pre>
<pre style="margin:0; padding:0 "> 212: </pre>
<pre style="margin:0; padding:0 "> 213:   // debug request from rv_dm to core</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 214:   logic debug_req;</pre>
<pre style="margin:0; padding:0 "> 215: </pre>
<pre style="margin:0; padding:0 "> 216:   // processor core</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 217:   rv_core_ibex #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 218:     .PMPEnable           (0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 219:     .PMPGranularity      (0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 220:     .PMPNumRegions       (4),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 221:     .MHPMCounterNum      (8),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 222:     .MHPMCounterWidth    (40),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 223:     .RV32E               (0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 224:     .RV32M               (1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 225:     .DmHaltAddr          (ADDR_SPACE_DEBUG_MEM + dm::HaltAddress),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 226:     .DmExceptionAddr     (ADDR_SPACE_DEBUG_MEM + dm::ExceptionAddress),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 227:     .PipeLine            (IbexPipeLine)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 228:   ) core (</pre>
<pre style="margin:0; padding:0 "> 229:     // clock and reset</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 230:     .clk_i                (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 231:     .rst_ni               (sys_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 232:     .test_en_i            (1'b0),</pre>
<pre style="margin:0; padding:0 "> 233:     // static pinning</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 234:     .hart_id_i            (32'b0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 235:     .boot_addr_i          (ADDR_SPACE_ROM),</pre>
<pre style="margin:0; padding:0 "> 236:     // TL-UL buses</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 237:     .tl_i_o               (tl_corei_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 238:     .tl_i_i               (tl_corei_h_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 239:     .tl_d_o               (tl_cored_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 240:     .tl_d_i               (tl_cored_h_d2h),</pre>
<pre style="margin:0; padding:0 "> 241:     // interrupts</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 242:     .irq_software_i       (msip),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 243:     .irq_timer_i          (intr_rv_timer_timer_expired_0_0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 244:     .irq_external_i       (irq_plic),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 245:     .irq_fast_i           (15'b0),// PLIC handles all peripheral interrupts</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 246:     .irq_nm_i             (1'b0),// TODO - add and connect alert responder</pre>
<pre style="margin:0; padding:0 "> 247:     // debug interface</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 248:     .debug_req_i          (debug_req),</pre>
<pre style="margin:0; padding:0 "> 249:     // CPU control signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 250:     .fetch_enable_i       (1'b1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 251:     .core_sleep_o         ()</pre>
<pre style="margin:0; padding:0 "> 252:   );</pre>
<pre style="margin:0; padding:0 "> 253: </pre>
<pre style="margin:0; padding:0 "> 254:   // Debug Module (RISC-V Debug Spec 0.13)</pre>
<pre style="margin:0; padding:0 "> 255:   //</pre>
<pre style="margin:0; padding:0 "> 256: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 257:   rv_dm #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 258:     .NrHarts     (1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 259:     .IdcodeValue (JTAG_IDCODE)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 260:   ) u_dm_top (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 261:     .clk_i         (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 262:     .rst_ni        (lc_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 263:     .testmode_i    (1'b0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 264:     .ndmreset_o    (ndmreset_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 265:     .dmactive_o    (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 266:     .debug_req_o   (debug_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 267:     .unavailable_i (1'b0),</pre>
<pre style="margin:0; padding:0 "> 268: </pre>
<pre style="margin:0; padding:0 "> 269:     // bus device with debug memory (for execution-based debug)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 270:     .tl_d_i        (tl_debug_mem_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 271:     .tl_d_o        (tl_debug_mem_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 272: </pre>
<pre style="margin:0; padding:0 "> 273:     // bus host (for system bus accesses, SBA)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 274:     .tl_h_o        (tl_dm_sba_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 275:     .tl_h_i        (tl_dm_sba_h_d2h),</pre>
<pre style="margin:0; padding:0 "> 276: </pre>
<pre style="margin:0; padding:0 "> 277:     //JTAG</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 278:     .tck_i            (jtag_tck_i),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 279:     .tms_i            (jtag_tms_i),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 280:     .trst_ni          (jtag_trst_ni),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 281:     .td_i             (jtag_td_i),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 282:     .td_o             (jtag_td_o),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 283:     .tdo_oe_o         (       )</pre>
<pre style="margin:0; padding:0 "> 284:   );</pre>
<pre style="margin:0; padding:0 "> 285: </pre>
<pre style="margin:0; padding:0 "> 286:   // ROM device</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 287:   logic        rom_req;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 288:   logic [10:0] rom_addr;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 289:   logic [31:0] rom_rdata;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 290:   logic        rom_rvalid;</pre>
<pre style="margin:0; padding:0 "> 291: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 292:   tlul_adapter_sram #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 293:     .SramAw(11),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 294:     .SramDw(32),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 295:     .Outstanding(1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 296:     .ErrOnWrite(1)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 297:   ) tl_adapter_rom (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 298:     .clk_i   (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 299:     .rst_ni   (sys_rst_n),</pre>
<pre style="margin:0; padding:0 "> 300: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 301:     .tl_i     (tl_rom_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 302:     .tl_o     (tl_rom_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 303: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 304:     .req_o    (rom_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 305:     .gnt_i    (1'b1), // Always grant as only one requester exists</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 306:     .we_o     (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 307:     .addr_o   (rom_addr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 308:     .wdata_o  (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 309:     .wmask_o  (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 310:     .rdata_i  (rom_rdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 311:     .rvalid_i (rom_rvalid),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 312:     .rerror_i (2'b00)</pre>
<pre style="margin:0; padding:0 "> 313:   );</pre>
<pre style="margin:0; padding:0 "> 314: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 315:   prim_rom #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 316:     .Width(32),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 317:     .Depth(2048)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 318:   ) u_rom_rom (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 319:     .clk_i   (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 320:     .rst_ni   (sys_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 321:     .cs_i     (rom_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 322:     .addr_i   (rom_addr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 323:     .dout_o   (rom_rdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 324:     .dvalid_o (rom_rvalid)</pre>
<pre style="margin:0; padding:0 "> 325:   );</pre>
<pre style="margin:0; padding:0 "> 326: </pre>
<pre style="margin:0; padding:0 "> 327:   // sram device</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 328:   logic        ram_main_req;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 329:   logic        ram_main_we;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 330:   logic [13:0] ram_main_addr;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 331:   logic [31:0] ram_main_wdata;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 332:   logic [31:0] ram_main_wmask;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 333:   logic [31:0] ram_main_rdata;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 334:   logic        ram_main_rvalid;</pre>
<pre style="margin:0; padding:0 "> 335: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 336:   tlul_adapter_sram #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 337:     .SramAw(14),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 338:     .SramDw(32),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 339:     .Outstanding(1)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 340:   ) tl_adapter_ram_main (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 341:     .clk_i   (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 342:     .rst_ni   (sys_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 343:     .tl_i     (tl_ram_main_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 344:     .tl_o     (tl_ram_main_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 345: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 346:     .req_o    (ram_main_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 347:     .gnt_i    (1'b1), // Always grant as only one requester exists</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 348:     .we_o     (ram_main_we),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 349:     .addr_o   (ram_main_addr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 350:     .wdata_o  (ram_main_wdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 351:     .wmask_o  (ram_main_wmask),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 352:     .rdata_i  (ram_main_rdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 353:     .rvalid_i (ram_main_rvalid),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 354:     .rerror_i (2'b00)</pre>
<pre style="margin:0; padding:0 "> 355:   );</pre>
<pre style="margin:0; padding:0 "> 356: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 357:   prim_ram_1p #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 358:     .Width(32),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 359:     .Depth(16384),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 360:     .DataBitsPerMask(8)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 361:   ) u_ram1p_ram_main (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 362:     .clk_i   (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 363:     .rst_ni   (sys_rst_n),</pre>
<pre style="margin:0; padding:0 "> 364: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 365:     .req_i    (ram_main_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 366:     .write_i  (ram_main_we),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 367:     .addr_i   (ram_main_addr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 368:     .wdata_i  (ram_main_wdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 369:     .wmask_i  (ram_main_wmask),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 370:     .rvalid_o (ram_main_rvalid),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 371:     .rdata_o  (ram_main_rdata)</pre>
<pre style="margin:0; padding:0 "> 372:   );</pre>
<pre style="margin:0; padding:0 "> 373: </pre>
<pre style="margin:0; padding:0 "> 374:   // flash controller to eflash communication</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 375:   flash_c2m_t flash_c2m;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 376:   flash_m2c_t flash_m2c;</pre>
<pre style="margin:0; padding:0 "> 377: </pre>
<pre style="margin:0; padding:0 "> 378:   // host to flash communication</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 379:   logic flash_host_req;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 380:   logic flash_host_req_rdy;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 381:   logic flash_host_req_done;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 382:   logic [FLASH_DW-1:0] flash_host_rdata;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 383:   logic [FLASH_AW-1:0] flash_host_addr;</pre>
<pre style="margin:0; padding:0 "> 384: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 385:   tlul_adapter_sram #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 386:     .SramAw(FLASH_AW),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 387:     .SramDw(FLASH_DW),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 388:     .Outstanding(1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 389:     .ByteAccess(0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 390:     .ErrOnWrite(1)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 391:   ) tl_adapter_eflash (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 392:     .clk_i   (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 393:     .rst_ni   (lc_rst_n),</pre>
<pre style="margin:0; padding:0 "> 394: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 395:     .tl_i       (tl_eflash_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 396:     .tl_o       (tl_eflash_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 397: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 398:     .req_o    (flash_host_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 399:     .gnt_i    (flash_host_req_rdy),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 400:     .we_o     (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 401:     .addr_o   (flash_host_addr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 402:     .wdata_o  (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 403:     .wmask_o  (),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 404:     .rdata_i  (flash_host_rdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 405:     .rvalid_i (flash_host_req_done),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 406:     .rerror_i (2'b00)</pre>
<pre style="margin:0; padding:0 "> 407:   );</pre>
<pre style="margin:0; padding:0 "> 408: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 409:   flash_phy #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 410:     .NumBanks(FLASH_BANKS),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 411:     .PagesPerBank(FLASH_PAGES_PER_BANK),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 412:     .WordsPerPage(FLASH_WORDS_PER_PAGE),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 413:     .DataWidth(32)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 414:   ) u_flash_eflash (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 415:     .clk_i   (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 416:     .rst_ni   (lc_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 417:     .host_req_i      (flash_host_req),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 418:     .host_addr_i     (flash_host_addr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 419:     .host_req_rdy_o  (flash_host_req_rdy),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 420:     .host_req_done_o (flash_host_req_done),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 421:     .host_rdata_o    (flash_host_rdata),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 422:     .flash_ctrl_i    (flash_c2m),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 423:     .flash_ctrl_o    (flash_m2c)</pre>
<pre style="margin:0; padding:0 "> 424:   );</pre>
<pre style="margin:0; padding:0 "> 425: </pre>
<pre style="margin:0; padding:0 "> 426: </pre>
<pre style="margin:0; padding:0 "> 427: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 428:   uart uart (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 429:       .tl_i (tl_uart_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 430:       .tl_o (tl_uart_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 431: </pre>
<pre style="margin:0; padding:0 "> 432:       // Input</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 433:       .cio_rx_i    (cio_uart_rx_p2d),</pre>
<pre style="margin:0; padding:0 "> 434: </pre>
<pre style="margin:0; padding:0 "> 435:       // Output</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 436:       .cio_tx_o    (cio_uart_tx_d2p),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 437:       .cio_tx_en_o (cio_uart_tx_en_d2p),</pre>
<pre style="margin:0; padding:0 "> 438: </pre>
<pre style="margin:0; padding:0 "> 439:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 440:       .intr_tx_watermark_o  (intr_uart_tx_watermark),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 441:       .intr_rx_watermark_o  (intr_uart_rx_watermark),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 442:       .intr_tx_empty_o      (intr_uart_tx_empty),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 443:       .intr_rx_overflow_o   (intr_uart_rx_overflow),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 444:       .intr_rx_frame_err_o  (intr_uart_rx_frame_err),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 445:       .intr_rx_break_err_o  (intr_uart_rx_break_err),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 446:       .intr_rx_timeout_o    (intr_uart_rx_timeout),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 447:       .intr_rx_parity_err_o (intr_uart_rx_parity_err),</pre>
<pre style="margin:0; padding:0 "> 448: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 449:       .clk_i (fixed_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 450:       .rst_ni (sys_fixed_rst_n)</pre>
<pre style="margin:0; padding:0 "> 451:   );</pre>
<pre style="margin:0; padding:0 "> 452: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 453:   gpio gpio (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 454:       .tl_i (tl_gpio_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 455:       .tl_o (tl_gpio_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 456: </pre>
<pre style="margin:0; padding:0 "> 457:       // Input</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 458:       .cio_gpio_i    (cio_gpio_gpio_p2d),</pre>
<pre style="margin:0; padding:0 "> 459: </pre>
<pre style="margin:0; padding:0 "> 460:       // Output</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 461:       .cio_gpio_o    (cio_gpio_gpio_d2p),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 462:       .cio_gpio_en_o (cio_gpio_gpio_en_d2p),</pre>
<pre style="margin:0; padding:0 "> 463: </pre>
<pre style="margin:0; padding:0 "> 464:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 465:       .intr_gpio_o (intr_gpio_gpio),</pre>
<pre style="margin:0; padding:0 "> 466: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 467:       .clk_i (fixed_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 468:       .rst_ni (sys_fixed_rst_n)</pre>
<pre style="margin:0; padding:0 "> 469:   );</pre>
<pre style="margin:0; padding:0 "> 470: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 471:   spi_device spi_device (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 472:       .tl_i (tl_spi_device_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 473:       .tl_o (tl_spi_device_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 474: </pre>
<pre style="margin:0; padding:0 "> 475:       // Input</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 476:       .cio_sck_i     (cio_spi_device_sck_p2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 477:       .cio_csb_i     (cio_spi_device_csb_p2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 478:       .cio_mosi_i    (cio_spi_device_mosi_p2d),</pre>
<pre style="margin:0; padding:0 "> 479: </pre>
<pre style="margin:0; padding:0 "> 480:       // Output</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 481:       .cio_miso_o    (cio_spi_device_miso_d2p),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 482:       .cio_miso_en_o (cio_spi_device_miso_en_d2p),</pre>
<pre style="margin:0; padding:0 "> 483: </pre>
<pre style="margin:0; padding:0 "> 484:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 485:       .intr_rxf_o         (intr_spi_device_rxf),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 486:       .intr_rxlvl_o       (intr_spi_device_rxlvl),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 487:       .intr_txlvl_o       (intr_spi_device_txlvl),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 488:       .intr_rxerr_o       (intr_spi_device_rxerr),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 489:       .intr_rxoverflow_o  (intr_spi_device_rxoverflow),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 490:       .intr_txunderflow_o (intr_spi_device_txunderflow),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 491:       .scanmode_i   (scanmode_i),</pre>
<pre style="margin:0; padding:0 "> 492: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 493:       .clk_i (fixed_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 494:       .rst_ni (spi_device_rst_n)</pre>
<pre style="margin:0; padding:0 "> 495:   );</pre>
<pre style="margin:0; padding:0 "> 496: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 497:   flash_ctrl flash_ctrl (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 498:       .tl_i (tl_flash_ctrl_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 499:       .tl_o (tl_flash_ctrl_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 500: </pre>
<pre style="margin:0; padding:0 "> 501:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 502:       .intr_prog_empty_o (intr_flash_ctrl_prog_empty),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 503:       .intr_prog_lvl_o   (intr_flash_ctrl_prog_lvl),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 504:       .intr_rd_full_o    (intr_flash_ctrl_rd_full),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 505:       .intr_rd_lvl_o     (intr_flash_ctrl_rd_lvl),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 506:       .intr_op_done_o    (intr_flash_ctrl_op_done),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 507:       .intr_op_error_o   (intr_flash_ctrl_op_error),</pre>
<pre style="margin:0; padding:0 "> 508: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 509:       .flash_o(flash_c2m),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 510:       .flash_i(flash_m2c),</pre>
<pre style="margin:0; padding:0 "> 511: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 512:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 513:       .rst_ni (lc_rst_n)</pre>
<pre style="margin:0; padding:0 "> 514:   );</pre>
<pre style="margin:0; padding:0 "> 515: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 516:   rv_timer rv_timer (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 517:       .tl_i (tl_rv_timer_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 518:       .tl_o (tl_rv_timer_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 519: </pre>
<pre style="margin:0; padding:0 "> 520:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 521:       .intr_timer_expired_0_0_o (intr_rv_timer_timer_expired_0_0),</pre>
<pre style="margin:0; padding:0 "> 522: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 523:       .clk_i (fixed_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 524:       .rst_ni (sys_fixed_rst_n)</pre>
<pre style="margin:0; padding:0 "> 525:   );</pre>
<pre style="margin:0; padding:0 "> 526: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 527:   aes aes (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 528:       .tl_i (tl_aes_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 529:       .tl_o (tl_aes_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 530: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 531:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 532:       .rst_ni (sys_rst_n)</pre>
<pre style="margin:0; padding:0 "> 533:   );</pre>
<pre style="margin:0; padding:0 "> 534: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 535:   hmac hmac (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 536:       .tl_i (tl_hmac_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 537:       .tl_o (tl_hmac_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 538: </pre>
<pre style="margin:0; padding:0 "> 539:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 540:       .intr_hmac_done_o (intr_hmac_hmac_done),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 541:       .intr_fifo_full_o (intr_hmac_fifo_full),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 542:       .intr_hmac_err_o  (intr_hmac_hmac_err),</pre>
<pre style="margin:0; padding:0 "> 543:       </pre>
<pre style="margin:0; padding:0 "> 544:       // [0]: msg_push_sha_disabled </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 545:       .alert_tx_o  ( alert_tx[0:0] ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 546:       .alert_rx_i  ( alert_rx[0:0] ),</pre>
<pre style="margin:0; padding:0 "> 547: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 548:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 549:       .rst_ni (sys_rst_n)</pre>
<pre style="margin:0; padding:0 "> 550:   );</pre>
<pre style="margin:0; padding:0 "> 551: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 552:   rv_plic rv_plic (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 553:       .tl_i (tl_rv_plic_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 554:       .tl_o (tl_rv_plic_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 555: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 556:       .intr_src_i (intr_vector),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 557:       .irq_o      (irq_plic),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 558:       .irq_id_o   (irq_id),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 559:       .msip_o     (msip),</pre>
<pre style="margin:0; padding:0 "> 560: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 561:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 562:       .rst_ni (sys_rst_n)</pre>
<pre style="margin:0; padding:0 "> 563:   );</pre>
<pre style="margin:0; padding:0 "> 564: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 565:   pinmux pinmux (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 566:       .tl_i (tl_pinmux_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 567:       .tl_o (tl_pinmux_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 568: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 569:       .periph_to_mio_i      (p2m    ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 570:       .periph_to_mio_oe_i   (p2m_en ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 571:       .mio_to_periph_o      (m2p    ),</pre>
<pre style="margin:0; padding:0 "> 572: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 573:       .mio_out_o            (mio_out_o),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 574:       .mio_oe_o             (mio_oe_o ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 575:       .mio_in_i             (mio_in_i ),</pre>
<pre style="margin:0; padding:0 "> 576: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 577:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 578:       .rst_ni (sys_rst_n)</pre>
<pre style="margin:0; padding:0 "> 579:   );</pre>
<pre style="margin:0; padding:0 "> 580: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 581:   alert_handler alert_handler (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 582:       .tl_i (tl_alert_handler_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 583:       .tl_o (tl_alert_handler_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 584: </pre>
<pre style="margin:0; padding:0 "> 585:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 586:       .intr_classa_o (intr_alert_handler_classa),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 587:       .intr_classb_o (intr_alert_handler_classb),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 588:       .intr_classc_o (intr_alert_handler_classc),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 589:       .intr_classd_o (intr_alert_handler_classd),</pre>
<pre style="margin:0; padding:0 "> 590:       // TODO: wire this to hardware debug circuit</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 591:       .crashdump_o (          ),</pre>
<pre style="margin:0; padding:0 "> 592:       // TODO: wire this to TRNG</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 593:       .entropy_i   ( 1'b0     ),</pre>
<pre style="margin:0; padding:0 "> 594:       // alert signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 595:       .alert_rx_o  ( alert_rx ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 596:       .alert_tx_i  ( alert_tx ),</pre>
<pre style="margin:0; padding:0 "> 597:       // escalation outputs</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 598:       .esc_rx_i    ( esc_rx   ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 599:       .esc_tx_o    ( esc_tx   ),</pre>
<pre style="margin:0; padding:0 "> 600: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 601:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 602:       .rst_ni (sys_rst_n)</pre>
<pre style="margin:0; padding:0 "> 603:   );</pre>
<pre style="margin:0; padding:0 "> 604: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 605:   nmi_gen nmi_gen (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 606:       .tl_i (tl_nmi_gen_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 607:       .tl_o (tl_nmi_gen_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 608: </pre>
<pre style="margin:0; padding:0 "> 609:       // Interrupt</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 610:       .intr_esc0_o (intr_nmi_gen_esc0),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 611:       .intr_esc1_o (intr_nmi_gen_esc1),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 612:       .intr_esc2_o (intr_nmi_gen_esc2),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 613:       .intr_esc3_o (intr_nmi_gen_esc3),</pre>
<pre style="margin:0; padding:0 "> 614:       // escalation signal inputs</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 615:       .esc_rx_o    ( esc_rx   ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 616:       .esc_tx_i    ( esc_tx   ),</pre>
<pre style="margin:0; padding:0 "> 617: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 618:       .clk_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 619:       .rst_ni (sys_rst_n)</pre>
<pre style="margin:0; padding:0 "> 620:   );</pre>
<pre style="margin:0; padding:0 "> 621: </pre>
<pre style="margin:0; padding:0 "> 622:   // interrupt assignments</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 623:   assign intr_vector = {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 624:       intr_nmi_gen_esc3,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 625:       intr_nmi_gen_esc2,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 626:       intr_nmi_gen_esc1,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 627:       intr_nmi_gen_esc0,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 628:       intr_alert_handler_classd,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 629:       intr_alert_handler_classc,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 630:       intr_alert_handler_classb,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 631:       intr_alert_handler_classa,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 632:       intr_hmac_hmac_err,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 633:       intr_hmac_fifo_full,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 634:       intr_hmac_hmac_done,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 635:       intr_flash_ctrl_op_error,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 636:       intr_flash_ctrl_op_done,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 637:       intr_flash_ctrl_rd_lvl,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 638:       intr_flash_ctrl_rd_full,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 639:       intr_flash_ctrl_prog_lvl,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 640:       intr_flash_ctrl_prog_empty,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 641:       intr_spi_device_txunderflow,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 642:       intr_spi_device_rxoverflow,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 643:       intr_spi_device_rxerr,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 644:       intr_spi_device_txlvl,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 645:       intr_spi_device_rxlvl,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 646:       intr_spi_device_rxf,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 647:       intr_uart_rx_parity_err,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 648:       intr_uart_rx_timeout,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 649:       intr_uart_rx_break_err,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 650:       intr_uart_rx_frame_err,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 651:       intr_uart_rx_overflow,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 652:       intr_uart_tx_empty,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 653:       intr_uart_rx_watermark,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 654:       intr_uart_tx_watermark,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 655:       intr_gpio_gpio</pre>
<pre style="margin:0; padding:0 "> 656:   };</pre>
<pre style="margin:0; padding:0 "> 657: </pre>
<pre style="margin:0; padding:0 "> 658:   // TL-UL Crossbar</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 659:   xbar_main u_xbar_main (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 660:     .clk_main_i (main_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 661:     .clk_fixed_i (fixed_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 662:     .rst_main_ni (sys_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 663:     .rst_fixed_ni (sys_fixed_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 664:     .tl_corei_i         (tl_corei_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 665:     .tl_corei_o         (tl_corei_h_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 666:     .tl_cored_i         (tl_cored_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 667:     .tl_cored_o         (tl_cored_h_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 668:     .tl_dm_sba_i        (tl_dm_sba_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 669:     .tl_dm_sba_o        (tl_dm_sba_h_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 670:     .tl_rom_o           (tl_rom_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 671:     .tl_rom_i           (tl_rom_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 672:     .tl_debug_mem_o     (tl_debug_mem_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 673:     .tl_debug_mem_i     (tl_debug_mem_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 674:     .tl_ram_main_o      (tl_ram_main_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 675:     .tl_ram_main_i      (tl_ram_main_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 676:     .tl_eflash_o        (tl_eflash_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 677:     .tl_eflash_i        (tl_eflash_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 678:     .tl_peri_o          (tl_peri_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 679:     .tl_peri_i          (tl_peri_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 680:     .tl_flash_ctrl_o    (tl_flash_ctrl_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 681:     .tl_flash_ctrl_i    (tl_flash_ctrl_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 682:     .tl_hmac_o          (tl_hmac_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 683:     .tl_hmac_i          (tl_hmac_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 684:     .tl_aes_o           (tl_aes_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 685:     .tl_aes_i           (tl_aes_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 686:     .tl_rv_plic_o       (tl_rv_plic_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 687:     .tl_rv_plic_i       (tl_rv_plic_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 688:     .tl_pinmux_o        (tl_pinmux_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 689:     .tl_pinmux_i        (tl_pinmux_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 690:     .tl_alert_handler_o (tl_alert_handler_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 691:     .tl_alert_handler_i (tl_alert_handler_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 692:     .tl_nmi_gen_o       (tl_nmi_gen_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 693:     .tl_nmi_gen_i       (tl_nmi_gen_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 694: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 695:     .scanmode_i</pre>
<pre style="margin:0; padding:0 "> 696:   );</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 697:   xbar_peri u_xbar_peri (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 698:     .clk_peri_i (fixed_clk),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 699:     .rst_peri_ni (sys_fixed_rst_n),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 700:     .tl_main_i       (tl_main_h_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 701:     .tl_main_o       (tl_main_h_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 702:     .tl_uart_o       (tl_uart_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 703:     .tl_uart_i       (tl_uart_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 704:     .tl_gpio_o       (tl_gpio_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 705:     .tl_gpio_i       (tl_gpio_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 706:     .tl_spi_device_o (tl_spi_device_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 707:     .tl_spi_device_i (tl_spi_device_d_d2h),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 708:     .tl_rv_timer_o   (tl_rv_timer_d_h2d),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 709:     .tl_rv_timer_i   (tl_rv_timer_d_d2h),</pre>
<pre style="margin:0; padding:0 "> 710: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 711:     .scanmode_i</pre>
<pre style="margin:0; padding:0 "> 712:   );</pre>
<pre style="margin:0; padding:0 "> 713: </pre>
<pre style="margin:0; padding:0 "> 714:   // Pinmux connections</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 715:   assign p2m = {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 716:     cio_gpio_gpio_d2p</pre>
<pre style="margin:0; padding:0 "> 717:   };</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 718:   assign p2m_en = {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 719:     cio_gpio_gpio_en_d2p</pre>
<pre style="margin:0; padding:0 "> 720:   };</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 721:   assign {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 722:     cio_gpio_gpio_p2d</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 723:   } = m2p;</pre>
<pre style="margin:0; padding:0 "> 724: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 725:   assign cio_spi_device_sck_p2d   = dio_spi_device_sck_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 726:   assign cio_spi_device_csb_p2d   = dio_spi_device_csb_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 727:   assign cio_spi_device_mosi_p2d  = dio_spi_device_mosi_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 728:   assign dio_spi_device_miso_o    = cio_spi_device_miso_d2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 729:   assign dio_spi_device_miso_en_o = cio_spi_device_miso_en_d2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 730:   assign cio_uart_rx_p2d          = dio_uart_rx_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 731:   assign dio_uart_tx_o            = cio_uart_tx_d2p;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 732:   assign dio_uart_tx_en_o         = cio_uart_tx_en_d2p;</pre>
<pre style="margin:0; padding:0 "> 733: </pre>
<pre style="margin:0; padding:0 "> 734:   // make sure scanmode_i is never X (including during reset)</pre>
<pre style="margin:0; padding:0 "> 735:   `ASSERT_KNOWN(scanmodeKnown, scanmode_i, clk_i, 0)</pre>
<pre style="margin:0; padding:0 "> 736: </pre>
<pre style="margin:0; padding:0 "> 737: endmodule</pre>
<pre style="margin:0; padding:0 "> 738: </pre>
</body>
</html>
