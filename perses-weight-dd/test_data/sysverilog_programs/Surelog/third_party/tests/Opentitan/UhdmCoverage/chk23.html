
<!DOCTYPE html>
<html>
<head>
<style>
body {

}
p {
font-size: 14px;
}</style>
<h3>hw/vendor/lowrisc_ibex/rtl/ibex_id_stage.sv Cov: 100% </h3>
<pre style="margin:0; padding:0 ">   1: // Copyright lowRISC contributors.</pre>
<pre style="margin:0; padding:0 ">   2: // Copyright 2018 ETH Zurich and University of Bologna, see also CREDITS.md.</pre>
<pre style="margin:0; padding:0 ">   3: // Licensed under the Apache License, Version 2.0, see LICENSE for details.</pre>
<pre style="margin:0; padding:0 ">   4: // SPDX-License-Identifier: Apache-2.0</pre>
<pre style="margin:0; padding:0 ">   5: </pre>
<pre style="margin:0; padding:0 ">   6: `ifdef RISCV_FORMAL</pre>
<pre style="margin:0; padding:0 ">   7:   `define RVFI</pre>
<pre style="margin:0; padding:0 ">   8: `endif</pre>
<pre style="margin:0; padding:0 ">   9: </pre>
<pre style="margin:0; padding:0 ">  10: /**</pre>
<pre style="margin:0; padding:0 ">  11:  * Instruction Decode Stage</pre>
<pre style="margin:0; padding:0 ">  12:  *</pre>
<pre style="margin:0; padding:0 ">  13:  * Decode stage of the core. It decodes the instructions and hosts the register</pre>
<pre style="margin:0; padding:0 ">  14:  * file.</pre>
<pre style="margin:0; padding:0 ">  15:  */</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  16: module ibex_id_stage #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  17:     parameter bit RV32E = 0,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  18:     parameter bit RV32M = 1</pre>
<pre style="margin:0; padding:0 ">  19: ) (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  20:     input  logic                  clk_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  21:     input  logic                  rst_ni,</pre>
<pre style="margin:0; padding:0 ">  22: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  23:     input  logic                  test_en_i,</pre>
<pre style="margin:0; padding:0 ">  24: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  25:     input  logic                  fetch_enable_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  26:     output logic                  ctrl_busy_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  27:     output logic                  illegal_insn_o,</pre>
<pre style="margin:0; padding:0 ">  28: </pre>
<pre style="margin:0; padding:0 ">  29:     // Interface to IF stage</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  30:     input  logic                  instr_valid_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  31:     input  logic                  instr_new_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  32:     input  logic [31:0]           instr_rdata_i,         // from IF-ID pipeline registers</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  33:     input  logic [15:0]           instr_rdata_c_i,       // from IF-ID pipeline registers</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  34:     input  logic                  instr_is_compressed_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  35:     output logic                  instr_req_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  36:     output logic                  instr_valid_clear_o,   // kill instr in IF-ID reg</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  37:     output logic                  id_in_ready_o,         // ID stage is ready for next instr</pre>
<pre style="margin:0; padding:0 ">  38: </pre>
<pre style="margin:0; padding:0 ">  39:     // Jumps and branches</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  40:     input  logic                  branch_decision_i,</pre>
<pre style="margin:0; padding:0 ">  41: </pre>
<pre style="margin:0; padding:0 ">  42:     // IF and ID stage signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  43:     output logic                  pc_set_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  44:     output ibex_pkg::pc_sel_e     pc_mux_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  45:     output ibex_pkg::exc_pc_sel_e exc_pc_mux_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  46:     output ibex_pkg::exc_cause_e  exc_cause_o,</pre>
<pre style="margin:0; padding:0 ">  47: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  48:     input  logic                  illegal_c_insn_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  49:     input  logic                  instr_fetch_err_i,</pre>
<pre style="margin:0; padding:0 ">  50: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  51:     input  logic [31:0]           pc_id_i,</pre>
<pre style="margin:0; padding:0 ">  52: </pre>
<pre style="margin:0; padding:0 ">  53:     // Stalls</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  54:     input  logic                  ex_valid_i,     // EX stage has valid output</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  55:     input  logic                  lsu_valid_i,    // LSU has valid output, or is done</pre>
<pre style="margin:0; padding:0 ">  56:     // ALU</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  57:     output ibex_pkg::alu_op_e     alu_operator_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  58:     output logic [31:0]           alu_operand_a_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  59:     output logic [31:0]           alu_operand_b_ex_o,</pre>
<pre style="margin:0; padding:0 ">  60: </pre>
<pre style="margin:0; padding:0 ">  61:     // MUL, DIV</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  62:     output logic                  mult_en_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  63:     output logic                  div_en_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  64:     output ibex_pkg::md_op_e      multdiv_operator_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  65:     output logic  [1:0]           multdiv_signed_mode_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  66:     output logic [31:0]           multdiv_operand_a_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  67:     output logic [31:0]           multdiv_operand_b_ex_o,</pre>
<pre style="margin:0; padding:0 ">  68: </pre>
<pre style="margin:0; padding:0 ">  69:     // CSR</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  70:     output logic                  csr_access_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  71:     output ibex_pkg::csr_op_e     csr_op_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  72:     output logic                  csr_save_if_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  73:     output logic                  csr_save_id_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  74:     output logic                  csr_restore_mret_id_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  75:     output logic                  csr_restore_dret_id_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  76:     output logic                  csr_save_cause_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  77:     output logic [31:0]           csr_mtval_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  78:     input  ibex_pkg::priv_lvl_e   priv_mode_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  79:     input  logic                  csr_mstatus_tw_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  80:     input  logic                  illegal_csr_insn_i,</pre>
<pre style="margin:0; padding:0 ">  81: </pre>
<pre style="margin:0; padding:0 ">  82:     // Interface to load store unit</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  83:     output logic                  data_req_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  84:     output logic                  data_we_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  85:     output logic [1:0]            data_type_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  86:     output logic                  data_sign_ext_ex_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  87:     output logic [31:0]           data_wdata_ex_o,</pre>
<pre style="margin:0; padding:0 ">  88: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  89:     input  logic                  lsu_addr_incr_req_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  90:     input  logic [31:0]           lsu_addr_last_i,</pre>
<pre style="margin:0; padding:0 ">  91: </pre>
<pre style="margin:0; padding:0 ">  92:     // Interrupt signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  93:     input  logic                  csr_mstatus_mie_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  94:     input  logic                  csr_msip_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  95:     input  logic                  csr_mtip_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  96:     input  logic                  csr_meip_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  97:     input  logic [14:0]           csr_mfip_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  98:     input  logic                  irq_pending_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  99:     input  logic                  irq_nm_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 100:     output logic                  nmi_mode_o,</pre>
<pre style="margin:0; padding:0 "> 101: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 102:     input  logic                  lsu_load_err_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 103:     input  logic                  lsu_store_err_i,</pre>
<pre style="margin:0; padding:0 "> 104: </pre>
<pre style="margin:0; padding:0 "> 105:     // Debug Signal</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 106:     output logic                  debug_mode_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 107:     output ibex_pkg::dbg_cause_e  debug_cause_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 108:     output logic                  debug_csr_save_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 109:     input  logic                  debug_req_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 110:     input  logic                  debug_single_step_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 111:     input  logic                  debug_ebreakm_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 112:     input  logic                  debug_ebreaku_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 113:     input  logic                  trigger_match_i,</pre>
<pre style="margin:0; padding:0 "> 114: </pre>
<pre style="margin:0; padding:0 "> 115:     // Write back signal</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 116:     input  logic [31:0]           regfile_wdata_lsu_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 117:     input  logic [31:0]           regfile_wdata_ex_i,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 118:     input  logic [31:0]           csr_rdata_i,</pre>
<pre style="margin:0; padding:0 "> 119: </pre>
<pre style="margin:0; padding:0 "> 120: `ifdef RVFI</pre>
<pre style="margin:0; padding:0 "> 121:     output logic [4:0]            rfvi_reg_raddr_ra_o,</pre>
<pre style="margin:0; padding:0 "> 122:     output logic [31:0]           rfvi_reg_rdata_ra_o,</pre>
<pre style="margin:0; padding:0 "> 123:     output logic [4:0]            rfvi_reg_raddr_rb_o,</pre>
<pre style="margin:0; padding:0 "> 124:     output logic [31:0]           rfvi_reg_rdata_rb_o,</pre>
<pre style="margin:0; padding:0 "> 125:     output logic [4:0]            rfvi_reg_waddr_rd_o,</pre>
<pre style="margin:0; padding:0 "> 126:     output logic [31:0]           rfvi_reg_wdata_rd_o,</pre>
<pre style="margin:0; padding:0 "> 127:     output logic                  rfvi_reg_we_o,</pre>
<pre style="margin:0; padding:0 "> 128: `endif</pre>
<pre style="margin:0; padding:0 "> 129: </pre>
<pre style="margin:0; padding:0 "> 130:     // Performance Counters</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 131:     output logic                  perf_jump_o,    // executing a jump instr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 132:     output logic                  perf_branch_o,  // executing a branch instr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 133:     output logic                  perf_tbranch_o, // executing a taken branch instr</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 134:     output logic                  instr_ret_o,</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 135:     output logic                  instr_ret_compressed_o</pre>
<pre style="margin:0; padding:0 "> 136: );</pre>
<pre style="margin:0; padding:0 "> 137: </pre>
<pre style="margin:0; padding:0 "> 138:   import ibex_pkg::*;</pre>
<pre style="margin:0; padding:0 "> 139: </pre>
<pre style="margin:0; padding:0 "> 140:   // Decoder/Controller, ID stage internal signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 141:   logic        illegal_insn_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 142:   logic        ebrk_insn;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 143:   logic        mret_insn_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 144:   logic        dret_insn_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 145:   logic        ecall_insn_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 146:   logic        wfi_insn_dec;</pre>
<pre style="margin:0; padding:0 "> 147: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 148:   logic        branch_in_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 149:   logic        branch_set_n, branch_set_q;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 150:   logic        jump_in_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 151:   logic        jump_set;</pre>
<pre style="margin:0; padding:0 "> 152: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 153:   logic        instr_executing;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 154:   logic        instr_multicycle;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 155:   logic        instr_multicycle_done_n, instr_multicycle_done_q;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 156:   logic        stall_lsu;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 157:   logic        stall_multdiv;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 158:   logic        stall_branch;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 159:   logic        stall_jump;</pre>
<pre style="margin:0; padding:0 "> 160: </pre>
<pre style="margin:0; padding:0 "> 161:   // Immediate decoding and sign extension</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 162:   logic [31:0] imm_i_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 163:   logic [31:0] imm_s_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 164:   logic [31:0] imm_b_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 165:   logic [31:0] imm_u_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 166:   logic [31:0] imm_j_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 167:   logic [31:0] zimm_rs1_type;</pre>
<pre style="margin:0; padding:0 "> 168: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 169:   logic [31:0] imm_a;       // contains the immediate for operand b</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 170:   logic [31:0] imm_b;       // contains the immediate for operand b</pre>
<pre style="margin:0; padding:0 "> 171: </pre>
<pre style="margin:0; padding:0 "> 172:   // Register file interface</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 173:   logic [4:0]  regfile_raddr_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 174:   logic [4:0]  regfile_raddr_b;</pre>
<pre style="margin:0; padding:0 "> 175: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 176:   logic [4:0]  regfile_waddr;</pre>
<pre style="margin:0; padding:0 "> 177: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 178:   logic [31:0] regfile_rdata_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 179:   logic [31:0] regfile_rdata_b;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 180:   logic [31:0] regfile_wdata;</pre>
<pre style="margin:0; padding:0 "> 181: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 182:   rf_wd_sel_e  regfile_wdata_sel;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 183:   logic        regfile_we;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 184:   logic        regfile_we_wb, regfile_we_dec;</pre>
<pre style="margin:0; padding:0 "> 185: </pre>
<pre style="margin:0; padding:0 "> 186:   // ALU Control</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 187:   alu_op_e     alu_operator;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 188:   op_a_sel_e   alu_op_a_mux_sel, alu_op_a_mux_sel_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 189:   op_b_sel_e   alu_op_b_mux_sel, alu_op_b_mux_sel_dec;</pre>
<pre style="margin:0; padding:0 "> 190: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 191:   imm_a_sel_e  imm_a_mux_sel;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 192:   imm_b_sel_e  imm_b_mux_sel, imm_b_mux_sel_dec;</pre>
<pre style="margin:0; padding:0 "> 193: </pre>
<pre style="margin:0; padding:0 "> 194:   // Multiplier Control</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 195:   logic        mult_en_id, mult_en_dec; // use integer multiplier</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 196:   logic        div_en_id, div_en_dec;   // use integer division or reminder</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 197:   logic        multdiv_en_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 198:   md_op_e      multdiv_operator;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 199:   logic [1:0]  multdiv_signed_mode;</pre>
<pre style="margin:0; padding:0 "> 200: </pre>
<pre style="margin:0; padding:0 "> 201:   // Data Memory Control</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 202:   logic        data_we_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 203:   logic [1:0]  data_type_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 204:   logic        data_sign_ext_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 205:   logic        data_req_id, data_req_dec;</pre>
<pre style="margin:0; padding:0 "> 206: </pre>
<pre style="margin:0; padding:0 "> 207:   // CSR control</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 208:   logic        csr_pipe_flush;</pre>
<pre style="margin:0; padding:0 "> 209: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 210:   logic [31:0] alu_operand_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 211:   logic [31:0] alu_operand_b;</pre>
<pre style="margin:0; padding:0 "> 212: </pre>
<pre style="margin:0; padding:0 "> 213:   /////////////</pre>
<pre style="margin:0; padding:0 "> 214:   // LSU Mux //</pre>
<pre style="margin:0; padding:0 "> 215:   /////////////</pre>
<pre style="margin:0; padding:0 "> 216: </pre>
<pre style="margin:0; padding:0 "> 217:   // Misaligned loads/stores result in two aligned loads/stores, compute second address</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 218:   assign alu_op_a_mux_sel = lsu_addr_incr_req_i ? OP_A_FWD        : alu_op_a_mux_sel_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 219:   assign alu_op_b_mux_sel = lsu_addr_incr_req_i ? OP_B_IMM        : alu_op_b_mux_sel_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 220:   assign imm_b_mux_sel    = lsu_addr_incr_req_i ? IMM_B_INCR_ADDR : imm_b_mux_sel_dec;</pre>
<pre style="margin:0; padding:0 "> 221: </pre>
<pre style="margin:0; padding:0 "> 222:   ///////////////////</pre>
<pre style="margin:0; padding:0 "> 223:   // Operand A MUX //</pre>
<pre style="margin:0; padding:0 "> 224:   ///////////////////</pre>
<pre style="margin:0; padding:0 "> 225: </pre>
<pre style="margin:0; padding:0 "> 226:   // Immediate MUX for Operand A</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 227:   assign imm_a = (imm_a_mux_sel == IMM_A_Z) ? zimm_rs1_type : '0;</pre>
<pre style="margin:0; padding:0 "> 228: </pre>
<pre style="margin:0; padding:0 "> 229:   // ALU MUX for Operand A</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 230:   always_comb begin : alu_operand_a_mux</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 231:     unique case (alu_op_a_mux_sel)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 232:       OP_A_REG_A:  alu_operand_a = regfile_rdata_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 233:       OP_A_FWD:    alu_operand_a = lsu_addr_last_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 234:       OP_A_CURRPC: alu_operand_a = pc_id_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 235:       OP_A_IMM:    alu_operand_a = imm_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 236:       default:     alu_operand_a = pc_id_i;</pre>
<pre style="margin:0; padding:0 "> 237:     endcase</pre>
<pre style="margin:0; padding:0 "> 238:   end</pre>
<pre style="margin:0; padding:0 "> 239: </pre>
<pre style="margin:0; padding:0 "> 240:   ///////////////////</pre>
<pre style="margin:0; padding:0 "> 241:   // Operand B MUX //</pre>
<pre style="margin:0; padding:0 "> 242:   ///////////////////</pre>
<pre style="margin:0; padding:0 "> 243: </pre>
<pre style="margin:0; padding:0 "> 244:   // Immediate MUX for Operand B</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 245:   always_comb begin : immediate_b_mux</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 246:     unique case (imm_b_mux_sel)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 247:       IMM_B_I:         imm_b = imm_i_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 248:       IMM_B_S:         imm_b = imm_s_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 249:       IMM_B_B:         imm_b = imm_b_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 250:       IMM_B_U:         imm_b = imm_u_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 251:       IMM_B_J:         imm_b = imm_j_type;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 252:       IMM_B_INCR_PC:   imm_b = instr_is_compressed_i ? 32'h2 : 32'h4;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 253:       IMM_B_INCR_ADDR: imm_b = 32'h4;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 254:       default:         imm_b = 32'h4;</pre>
<pre style="margin:0; padding:0 "> 255:     endcase</pre>
<pre style="margin:0; padding:0 "> 256:   end</pre>
<pre style="margin:0; padding:0 "> 257: </pre>
<pre style="margin:0; padding:0 "> 258:   // ALU MUX for Operand B</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 259:   assign alu_operand_b = (alu_op_b_mux_sel == OP_B_IMM) ? imm_b : regfile_rdata_b;</pre>
<pre style="margin:0; padding:0 "> 260: </pre>
<pre style="margin:0; padding:0 "> 261:   ///////////////////////</pre>
<pre style="margin:0; padding:0 "> 262:   // Register File MUX //</pre>
<pre style="margin:0; padding:0 "> 263:   ///////////////////////</pre>
<pre style="margin:0; padding:0 "> 264: </pre>
<pre style="margin:0; padding:0 "> 265:   // Register file write enable mux - do not propagate illegal CSR ops, do not write when idle,</pre>
<pre style="margin:0; padding:0 "> 266:   // for loads/stores and multdiv operations write when the data is ready only</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 267:   assign regfile_we = (illegal_csr_insn_i || !instr_executing) ? 1'b0          :</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 268:                       (data_req_dec || multdiv_en_dec)         ? regfile_we_wb : regfile_we_dec;</pre>
<pre style="margin:0; padding:0 "> 269: </pre>
<pre style="margin:0; padding:0 "> 270:   // Register file write data mux</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 271:   always_comb begin : regfile_wdata_mux</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 272:     unique case (regfile_wdata_sel)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 273:       RF_WD_EX:  regfile_wdata = regfile_wdata_ex_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 274:       RF_WD_LSU: regfile_wdata = regfile_wdata_lsu_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 275:       RF_WD_CSR: regfile_wdata = csr_rdata_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 276:       default:   regfile_wdata = regfile_wdata_ex_i;</pre>
<pre style="margin:0; padding:0 "> 277:     endcase</pre>
<pre style="margin:0; padding:0 "> 278:   end</pre>
<pre style="margin:0; padding:0 "> 279: </pre>
<pre style="margin:0; padding:0 "> 280:   ///////////////////</pre>
<pre style="margin:0; padding:0 "> 281:   // Register File //</pre>
<pre style="margin:0; padding:0 "> 282:   ///////////////////</pre>
<pre style="margin:0; padding:0 "> 283: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 284:   ibex_register_file #( .RV32E ( RV32E ) ) registers_i (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 285:       .clk_i        ( clk_i           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 286:       .rst_ni       ( rst_ni          ),</pre>
<pre style="margin:0; padding:0 "> 287: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 288:       .test_en_i    ( test_en_i       ),</pre>
<pre style="margin:0; padding:0 "> 289: </pre>
<pre style="margin:0; padding:0 "> 290:       // Read port a</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 291:       .raddr_a_i    ( regfile_raddr_a ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 292:       .rdata_a_o    ( regfile_rdata_a ),</pre>
<pre style="margin:0; padding:0 "> 293:       // Read port b</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 294:       .raddr_b_i    ( regfile_raddr_b ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 295:       .rdata_b_o    ( regfile_rdata_b ),</pre>
<pre style="margin:0; padding:0 "> 296:       // write port</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 297:       .waddr_a_i    ( regfile_waddr   ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 298:       .wdata_a_i    ( regfile_wdata   ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 299:       .we_a_i       ( regfile_we      )</pre>
<pre style="margin:0; padding:0 "> 300:   );</pre>
<pre style="margin:0; padding:0 "> 301: </pre>
<pre style="margin:0; padding:0 "> 302: `ifdef RVFI</pre>
<pre style="margin:0; padding:0 "> 303:   assign rfvi_reg_raddr_ra_o = regfile_raddr_a;</pre>
<pre style="margin:0; padding:0 "> 304:   assign rfvi_reg_rdata_ra_o = regfile_rdata_a;</pre>
<pre style="margin:0; padding:0 "> 305:   assign rfvi_reg_raddr_rb_o = regfile_raddr_b;</pre>
<pre style="margin:0; padding:0 "> 306:   assign rfvi_reg_rdata_rb_o = regfile_rdata_b;</pre>
<pre style="margin:0; padding:0 "> 307:   assign rfvi_reg_waddr_rd_o = regfile_waddr;</pre>
<pre style="margin:0; padding:0 "> 308:   assign rfvi_reg_wdata_rd_o = regfile_wdata;</pre>
<pre style="margin:0; padding:0 "> 309:   assign rfvi_reg_we_o       = regfile_we;</pre>
<pre style="margin:0; padding:0 "> 310: `endif</pre>
<pre style="margin:0; padding:0 "> 311: </pre>
<pre style="margin:0; padding:0 "> 312:   /////////////</pre>
<pre style="margin:0; padding:0 "> 313:   // Decoder //</pre>
<pre style="margin:0; padding:0 "> 314:   /////////////</pre>
<pre style="margin:0; padding:0 "> 315: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 316:   ibex_decoder #(</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 317:       .RV32E ( RV32E ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 318:       .RV32M ( RV32M )</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 319:   ) decoder_i (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 320:       .clk_i                           ( clk_i                ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 321:       .rst_ni                          ( rst_ni               ),</pre>
<pre style="margin:0; padding:0 "> 322: </pre>
<pre style="margin:0; padding:0 "> 323:       // controller</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 324:       .illegal_insn_o                  ( illegal_insn_dec     ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 325:       .ebrk_insn_o                     ( ebrk_insn            ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 326:       .mret_insn_o                     ( mret_insn_dec        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 327:       .dret_insn_o                     ( dret_insn_dec        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 328:       .ecall_insn_o                    ( ecall_insn_dec       ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 329:       .wfi_insn_o                      ( wfi_insn_dec         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 330:       .jump_set_o                      ( jump_set             ),</pre>
<pre style="margin:0; padding:0 "> 331: </pre>
<pre style="margin:0; padding:0 "> 332:       // from IF-ID pipeline register</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 333:       .instr_new_i                     ( instr_new_i          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 334:       .instr_rdata_i                   ( instr_rdata_i        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 335:       .illegal_c_insn_i                ( illegal_c_insn_i     ),</pre>
<pre style="margin:0; padding:0 "> 336: </pre>
<pre style="margin:0; padding:0 "> 337:       // immediates</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 338:       .imm_a_mux_sel_o                 ( imm_a_mux_sel        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 339:       .imm_b_mux_sel_o                 ( imm_b_mux_sel_dec    ),</pre>
<pre style="margin:0; padding:0 "> 340: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 341:       .imm_i_type_o                    ( imm_i_type           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 342:       .imm_s_type_o                    ( imm_s_type           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 343:       .imm_b_type_o                    ( imm_b_type           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 344:       .imm_u_type_o                    ( imm_u_type           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 345:       .imm_j_type_o                    ( imm_j_type           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 346:       .zimm_rs1_type_o                 ( zimm_rs1_type        ),</pre>
<pre style="margin:0; padding:0 "> 347: </pre>
<pre style="margin:0; padding:0 "> 348:       // register file</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 349:       .regfile_wdata_sel_o             ( regfile_wdata_sel    ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 350:       .regfile_we_o                    ( regfile_we_dec       ),</pre>
<pre style="margin:0; padding:0 "> 351: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 352:       .regfile_raddr_a_o               ( regfile_raddr_a      ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 353:       .regfile_raddr_b_o               ( regfile_raddr_b      ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 354:       .regfile_waddr_o                 ( regfile_waddr        ),</pre>
<pre style="margin:0; padding:0 "> 355: </pre>
<pre style="margin:0; padding:0 "> 356:       // ALU</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 357:       .alu_operator_o                  ( alu_operator         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 358:       .alu_op_a_mux_sel_o              ( alu_op_a_mux_sel_dec ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 359:       .alu_op_b_mux_sel_o              ( alu_op_b_mux_sel_dec ),</pre>
<pre style="margin:0; padding:0 "> 360: </pre>
<pre style="margin:0; padding:0 "> 361:       // MULT & DIV</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 362:       .mult_en_o                       ( mult_en_dec          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 363:       .div_en_o                        ( div_en_dec           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 364:       .multdiv_operator_o              ( multdiv_operator     ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 365:       .multdiv_signed_mode_o           ( multdiv_signed_mode  ),</pre>
<pre style="margin:0; padding:0 "> 366: </pre>
<pre style="margin:0; padding:0 "> 367:       // CSRs</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 368:       .csr_access_o                    ( csr_access_o         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 369:       .csr_op_o                        ( csr_op_o             ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 370:       .csr_pipe_flush_o                ( csr_pipe_flush       ),</pre>
<pre style="margin:0; padding:0 "> 371: </pre>
<pre style="margin:0; padding:0 "> 372:       // LSU</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 373:       .data_req_o                      ( data_req_dec         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 374:       .data_we_o                       ( data_we_id           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 375:       .data_type_o                     ( data_type_id         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 376:       .data_sign_extension_o           ( data_sign_ext_id     ),</pre>
<pre style="margin:0; padding:0 "> 377: </pre>
<pre style="margin:0; padding:0 "> 378:       // jump/branches</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 379:       .jump_in_dec_o                   ( jump_in_dec          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 380:       .branch_in_dec_o                 ( branch_in_dec        )</pre>
<pre style="margin:0; padding:0 "> 381:   );</pre>
<pre style="margin:0; padding:0 "> 382: </pre>
<pre style="margin:0; padding:0 "> 383:   ////////////////</pre>
<pre style="margin:0; padding:0 "> 384:   // Controller //</pre>
<pre style="margin:0; padding:0 "> 385:   ////////////////</pre>
<pre style="margin:0; padding:0 "> 386: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 387:   assign illegal_insn_o = instr_valid_i & (illegal_insn_dec | illegal_csr_insn_i);</pre>
<pre style="margin:0; padding:0 "> 388: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 389:   ibex_controller controller_i (</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 390:       .clk_i                          ( clk_i                  ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 391:       .rst_ni                         ( rst_ni                 ),</pre>
<pre style="margin:0; padding:0 "> 392: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 393:       .fetch_enable_i                 ( fetch_enable_i         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 394:       .ctrl_busy_o                    ( ctrl_busy_o            ),</pre>
<pre style="margin:0; padding:0 "> 395: </pre>
<pre style="margin:0; padding:0 "> 396:       // decoder related signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 397:       .illegal_insn_i                 ( illegal_insn_o         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 398:       .ecall_insn_i                   ( ecall_insn_dec         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 399:       .mret_insn_i                    ( mret_insn_dec          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 400:       .dret_insn_i                    ( dret_insn_dec          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 401:       .wfi_insn_i                     ( wfi_insn_dec           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 402:       .ebrk_insn_i                    ( ebrk_insn              ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 403:       .csr_pipe_flush_i               ( csr_pipe_flush         ),</pre>
<pre style="margin:0; padding:0 "> 404: </pre>
<pre style="margin:0; padding:0 "> 405:       // from IF-ID pipeline</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 406:       .instr_valid_i                  ( instr_valid_i          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 407:       .instr_i                        ( instr_rdata_i          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 408:       .instr_compressed_i             ( instr_rdata_c_i        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 409:       .instr_is_compressed_i          ( instr_is_compressed_i  ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 410:       .instr_fetch_err_i              ( instr_fetch_err_i      ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 411:       .pc_id_i                        ( pc_id_i                ),</pre>
<pre style="margin:0; padding:0 "> 412: </pre>
<pre style="margin:0; padding:0 "> 413:       // to IF-ID pipeline</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 414:       .instr_valid_clear_o            ( instr_valid_clear_o    ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 415:       .id_in_ready_o                  ( id_in_ready_o          ),</pre>
<pre style="margin:0; padding:0 "> 416: </pre>
<pre style="margin:0; padding:0 "> 417:       // to prefetcher</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 418:       .instr_req_o                    ( instr_req_o            ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 419:       .pc_set_o                       ( pc_set_o               ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 420:       .pc_mux_o                       ( pc_mux_o               ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 421:       .exc_pc_mux_o                   ( exc_pc_mux_o           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 422:       .exc_cause_o                    ( exc_cause_o            ),</pre>
<pre style="margin:0; padding:0 "> 423: </pre>
<pre style="margin:0; padding:0 "> 424:       // LSU</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 425:       .lsu_addr_last_i                ( lsu_addr_last_i        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 426:       .load_err_i                     ( lsu_load_err_i         ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 427:       .store_err_i                    ( lsu_store_err_i        ),</pre>
<pre style="margin:0; padding:0 "> 428: </pre>
<pre style="margin:0; padding:0 "> 429:       // jump/branch control</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 430:       .branch_set_i                   ( branch_set_q           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 431:       .jump_set_i                     ( jump_set               ),</pre>
<pre style="margin:0; padding:0 "> 432: </pre>
<pre style="margin:0; padding:0 "> 433:       // interrupt signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 434:       .csr_mstatus_mie_i              ( csr_mstatus_mie_i      ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 435:       .csr_msip_i                     ( csr_msip_i             ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 436:       .csr_mtip_i                     ( csr_mtip_i             ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 437:       .csr_meip_i                     ( csr_meip_i             ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 438:       .csr_mfip_i                     ( csr_mfip_i             ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 439:       .irq_pending_i                  ( irq_pending_i          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 440:       .irq_nm_i                       ( irq_nm_i               ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 441:       .nmi_mode_o                     ( nmi_mode_o             ),</pre>
<pre style="margin:0; padding:0 "> 442: </pre>
<pre style="margin:0; padding:0 "> 443:       // CSR Controller Signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 444:       .csr_save_if_o                  ( csr_save_if_o          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 445:       .csr_save_id_o                  ( csr_save_id_o          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 446:       .csr_restore_mret_id_o          ( csr_restore_mret_id_o  ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 447:       .csr_restore_dret_id_o          ( csr_restore_dret_id_o  ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 448:       .csr_save_cause_o               ( csr_save_cause_o       ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 449:       .csr_mtval_o                    ( csr_mtval_o            ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 450:       .priv_mode_i                    ( priv_mode_i            ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 451:       .csr_mstatus_tw_i               ( csr_mstatus_tw_i       ),</pre>
<pre style="margin:0; padding:0 "> 452: </pre>
<pre style="margin:0; padding:0 "> 453:       // Debug Signal</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 454:       .debug_mode_o                   ( debug_mode_o           ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 455:       .debug_cause_o                  ( debug_cause_o          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 456:       .debug_csr_save_o               ( debug_csr_save_o       ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 457:       .debug_req_i                    ( debug_req_i            ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 458:       .debug_single_step_i            ( debug_single_step_i    ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 459:       .debug_ebreakm_i                ( debug_ebreakm_i        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 460:       .debug_ebreaku_i                ( debug_ebreaku_i        ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 461:       .trigger_match_i                ( trigger_match_i        ),</pre>
<pre style="margin:0; padding:0 "> 462: </pre>
<pre style="margin:0; padding:0 "> 463:       // stall signals</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 464:       .stall_lsu_i                    ( stall_lsu              ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 465:       .stall_multdiv_i                ( stall_multdiv          ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 466:       .stall_jump_i                   ( stall_jump             ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 467:       .stall_branch_i                 ( stall_branch           ),</pre>
<pre style="margin:0; padding:0 "> 468: </pre>
<pre style="margin:0; padding:0 "> 469:       // Performance Counters</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 470:       .perf_jump_o                    ( perf_jump_o            ),</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 471:       .perf_tbranch_o                 ( perf_tbranch_o         )</pre>
<pre style="margin:0; padding:0 "> 472:   );</pre>
<pre style="margin:0; padding:0 "> 473: </pre>
<pre style="margin:0; padding:0 "> 474:   //////////////</pre>
<pre style="margin:0; padding:0 "> 475:   // ID-EX/WB //</pre>
<pre style="margin:0; padding:0 "> 476:   //////////////</pre>
<pre style="margin:0; padding:0 "> 477: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 478:   assign multdiv_en_dec   = mult_en_dec | div_en_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 479:   assign instr_multicycle = data_req_dec | multdiv_en_dec | branch_in_dec | jump_in_dec;</pre>
<pre style="margin:0; padding:0 "> 480: </pre>
<pre style="margin:0; padding:0 "> 481:   // Forward decoder output to EX, WB and controller only if current instr is still</pre>
<pre style="margin:0; padding:0 "> 482:   // being executed. This is the case if the current instr is either:</pre>
<pre style="margin:0; padding:0 "> 483:   // - a new instr (not yet done)</pre>
<pre style="margin:0; padding:0 "> 484:   // - a multicycle instr that is not yet done</pre>
<pre style="margin:0; padding:0 "> 485:   // An instruction error will suppress any requests or register writes</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 486:   assign instr_executing = (instr_new_i | (instr_multicycle & ~instr_multicycle_done_q)) &</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 487:                            ~instr_fetch_err_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 488:   assign data_req_id     = instr_executing ? data_req_dec  : 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 489:   assign mult_en_id      = instr_executing ? mult_en_dec   : 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 490:   assign div_en_id       = instr_executing ? div_en_dec    : 1'b0;</pre>
<pre style="margin:0; padding:0 "> 491: </pre>
<pre style="margin:0; padding:0 "> 492:   ///////////</pre>
<pre style="margin:0; padding:0 "> 493:   // ID-EX //</pre>
<pre style="margin:0; padding:0 "> 494:   ///////////</pre>
<pre style="margin:0; padding:0 "> 495: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 496:   assign data_req_ex_o               = data_req_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 497:   assign data_we_ex_o                = data_we_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 498:   assign data_type_ex_o              = data_type_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 499:   assign data_sign_ext_ex_o          = data_sign_ext_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 500:   assign data_wdata_ex_o             = regfile_rdata_b;</pre>
<pre style="margin:0; padding:0 "> 501: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 502:   assign alu_operator_ex_o           = alu_operator;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 503:   assign alu_operand_a_ex_o          = alu_operand_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 504:   assign alu_operand_b_ex_o          = alu_operand_b;</pre>
<pre style="margin:0; padding:0 "> 505: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 506:   assign mult_en_ex_o                = mult_en_id;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 507:   assign div_en_ex_o                 = div_en_id;</pre>
<pre style="margin:0; padding:0 "> 508: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 509:   assign multdiv_operator_ex_o       = multdiv_operator;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 510:   assign multdiv_signed_mode_ex_o    = multdiv_signed_mode;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 511:   assign multdiv_operand_a_ex_o      = regfile_rdata_a;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 512:   assign multdiv_operand_b_ex_o      = regfile_rdata_b;</pre>
<pre style="margin:0; padding:0 "> 513: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 514:   typedef enum logic { IDLE, WAIT_MULTICYCLE } id_fsm_e;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 515:   id_fsm_e id_wb_fsm_cs, id_wb_fsm_ns;</pre>
<pre style="margin:0; padding:0 "> 516: </pre>
<pre style="margin:0; padding:0 "> 517:   ////////////////////////////////</pre>
<pre style="margin:0; padding:0 "> 518:   // ID-EX/WB Pipeline Register //</pre>
<pre style="margin:0; padding:0 "> 519:   ////////////////////////////////</pre>
<pre style="margin:0; padding:0 "> 520: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 521:   always_ff @(posedge clk_i or negedge rst_ni) begin : id_wb_pipeline_reg</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 522:     if (!rst_ni) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 523:       id_wb_fsm_cs            <= IDLE;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 524:       branch_set_q            <= 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 525:       instr_multicycle_done_q <= 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 526:     end else begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 527:       id_wb_fsm_cs            <= id_wb_fsm_ns;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 528:       branch_set_q            <= branch_set_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 529:       instr_multicycle_done_q <= instr_multicycle_done_n;</pre>
<pre style="margin:0; padding:0 "> 530:     end</pre>
<pre style="margin:0; padding:0 "> 531:   end</pre>
<pre style="margin:0; padding:0 "> 532: </pre>
<pre style="margin:0; padding:0 "> 533:   //////////////////</pre>
<pre style="margin:0; padding:0 "> 534:   // ID-EX/WB FSM //</pre>
<pre style="margin:0; padding:0 "> 535:   //////////////////</pre>
<pre style="margin:0; padding:0 "> 536: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 537:   always_comb begin : id_wb_fsm</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 538:     id_wb_fsm_ns            = id_wb_fsm_cs;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 539:     instr_multicycle_done_n = instr_multicycle_done_q;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 540:     regfile_we_wb           = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 541:     stall_lsu               = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 542:     stall_multdiv           = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 543:     stall_jump              = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 544:     stall_branch            = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 545:     branch_set_n            = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 546:     perf_branch_o           = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 547:     instr_ret_o             = 1'b0;</pre>
<pre style="margin:0; padding:0 "> 548: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 549:     unique case (id_wb_fsm_cs)</pre>
<pre style="margin:0; padding:0 "> 550: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 551:       IDLE: begin</pre>
<pre style="margin:0; padding:0 "> 552:         // only detect multicycle when instruction is new, do not re-detect after</pre>
<pre style="margin:0; padding:0 "> 553:         // execution (when waiting for next instruction from IF stage)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 554:         if (instr_new_i & ~instr_fetch_err_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 555:           unique case (1'b1)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 556:             data_req_dec: begin</pre>
<pre style="margin:0; padding:0 "> 557:               // LSU operation</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 558:               id_wb_fsm_ns            = WAIT_MULTICYCLE;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 559:               stall_lsu               = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 560:               instr_multicycle_done_n = 1'b0;</pre>
<pre style="margin:0; padding:0 "> 561:             end</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 562:             multdiv_en_dec: begin</pre>
<pre style="margin:0; padding:0 "> 563:               // MUL or DIV operation</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 564:               id_wb_fsm_ns            = WAIT_MULTICYCLE;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 565:               stall_multdiv           = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 566:               instr_multicycle_done_n = 1'b0;</pre>
<pre style="margin:0; padding:0 "> 567:             end</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 568:             branch_in_dec: begin</pre>
<pre style="margin:0; padding:0 "> 569:               // cond branch operation</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 570:               id_wb_fsm_ns            =  branch_decision_i ? WAIT_MULTICYCLE : IDLE;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 571:               stall_branch            =  branch_decision_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 572:               instr_multicycle_done_n = ~branch_decision_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 573:               branch_set_n            =  branch_decision_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 574:               perf_branch_o           =  1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 575:               instr_ret_o             = ~branch_decision_i;</pre>
<pre style="margin:0; padding:0 "> 576:             end</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 577:             jump_in_dec: begin</pre>
<pre style="margin:0; padding:0 "> 578:               // uncond branch operation</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 579:               id_wb_fsm_ns            = WAIT_MULTICYCLE;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 580:               stall_jump              = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 581:               instr_multicycle_done_n = 1'b0;</pre>
<pre style="margin:0; padding:0 "> 582:             end</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 583:             default: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 584:               instr_multicycle_done_n = 1'b0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 585:               instr_ret_o             = 1'b1;</pre>
<pre style="margin:0; padding:0 "> 586:             end</pre>
<pre style="margin:0; padding:0 "> 587:           endcase</pre>
<pre style="margin:0; padding:0 "> 588:         end</pre>
<pre style="margin:0; padding:0 "> 589:       end</pre>
<pre style="margin:0; padding:0 "> 590: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 591:       WAIT_MULTICYCLE: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 592:         if ((data_req_dec & lsu_valid_i) | (~data_req_dec & ex_valid_i)) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 593:           id_wb_fsm_ns            = IDLE;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 594:           instr_multicycle_done_n = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 595:           regfile_we_wb           = regfile_we_dec & ~lsu_load_err_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 596:           instr_ret_o             = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 597:         end else begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 598:           stall_lsu               = data_req_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 599:           stall_multdiv           = multdiv_en_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 600:           stall_branch            = branch_in_dec;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 601:           stall_jump              = jump_in_dec;</pre>
<pre style="margin:0; padding:0 "> 602:         end</pre>
<pre style="margin:0; padding:0 "> 603:       end</pre>
<pre style="margin:0; padding:0 "> 604: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 605:       default: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 606:         id_wb_fsm_ns = IDLE;</pre>
<pre style="margin:0; padding:0 "> 607:       end</pre>
<pre style="margin:0; padding:0 "> 608:     endcase</pre>
<pre style="margin:0; padding:0 "> 609:   end</pre>
<pre style="margin:0; padding:0 "> 610: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 611:   assign instr_ret_compressed_o = instr_ret_o & instr_is_compressed_i;</pre>
<pre style="margin:0; padding:0 "> 612: </pre>
<pre style="margin:0; padding:0 "> 613:   ////////////////</pre>
<pre style="margin:0; padding:0 "> 614:   // Assertions //</pre>
<pre style="margin:0; padding:0 "> 615:   ////////////////</pre>
<pre style="margin:0; padding:0 "> 616: </pre>
<pre style="margin:0; padding:0 "> 617:   // Selectors must be known/valid.</pre>
<pre style="margin:0; padding:0 "> 618:   `ASSERT_KNOWN(IbexAluOpMuxSelKnown, alu_op_a_mux_sel, clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 619:   `ASSERT(IbexImmBMuxSelValid, imm_b_mux_sel inside {</pre>
<pre style="margin:0; padding:0 "> 620:       IMM_B_I,</pre>
<pre style="margin:0; padding:0 "> 621:       IMM_B_S,</pre>
<pre style="margin:0; padding:0 "> 622:       IMM_B_B,</pre>
<pre style="margin:0; padding:0 "> 623:       IMM_B_U,</pre>
<pre style="margin:0; padding:0 "> 624:       IMM_B_J,</pre>
<pre style="margin:0; padding:0 "> 625:       IMM_B_INCR_PC,</pre>
<pre style="margin:0; padding:0 "> 626:       IMM_B_INCR_ADDR</pre>
<pre style="margin:0; padding:0 "> 627:       }, clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 628:   `ASSERT(IbexRegfileWdataSelValid, regfile_wdata_sel inside {</pre>
<pre style="margin:0; padding:0 "> 629:       RF_WD_LSU,</pre>
<pre style="margin:0; padding:0 "> 630:       RF_WD_EX,</pre>
<pre style="margin:0; padding:0 "> 631:       RF_WD_CSR</pre>
<pre style="margin:0; padding:0 "> 632:       }, clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 633:   `ASSERT_KNOWN(IbexWbStateKnown, id_wb_fsm_cs, clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 634: </pre>
<pre style="margin:0; padding:0 "> 635:   // Branch decision must be valid when jumping.</pre>
<pre style="margin:0; padding:0 "> 636:   `ASSERT(IbexBranchDecisionValid, branch_in_dec |-> !$isunknown(branch_decision_i), clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 637: </pre>
<pre style="margin:0; padding:0 "> 638:   // Instruction delivered to ID stage can not contain X.</pre>
<pre style="margin:0; padding:0 "> 639:   `ASSERT(IbexIdInstrKnown,</pre>
<pre style="margin:0; padding:0 "> 640:       (instr_valid_i && !(illegal_c_insn_i || instr_fetch_err_i)) |-> !$isunknown(instr_rdata_i),</pre>
<pre style="margin:0; padding:0 "> 641:       clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 642: </pre>
<pre style="margin:0; padding:0 "> 643:   // Multicycle enable signals must be unique.</pre>
<pre style="margin:0; padding:0 "> 644:   `ASSERT(IbexMulticycleEnableUnique,</pre>
<pre style="margin:0; padding:0 "> 645:       $onehot0({data_req_dec, multdiv_en_dec, branch_in_dec, jump_in_dec}), clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 646: </pre>
<pre style="margin:0; padding:0 "> 647:   `ifdef CHECK_MISALIGNED</pre>
<pre style="margin:0; padding:0 "> 648:   `ASSERT(IbexMisalignedMemoryAccess, !lsu_addr_incr_req_i, clk_i, !rst_ni)</pre>
<pre style="margin:0; padding:0 "> 649:   `endif</pre>
<pre style="margin:0; padding:0 "> 650: </pre>
<pre style="margin:0; padding:0 "> 651: endmodule</pre>
<pre style="margin:0; padding:0 "> 652: </pre>
</body>
</html>
